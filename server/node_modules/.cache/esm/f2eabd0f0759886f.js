let express,path,cors,bodyParser,ApolloServer,gql,movies,users,typeDefs,resolvers,MoviesController,CommentsController,UsersController,MoviesDAO,CommentsDAO,UsersDAO;_075‍.x([["server",()=>server],["default",()=>_075‍.o]]);_075‍.w("dotenv/config");_075‍.w("express",[["default",["express"],function(v){express=v}]]);_075‍.w("path",[["default",["path"],function(v){path=v}]]);_075‍.w("cors",[["default",["cors"],function(v){cors=v}]]);_075‍.w("body-parser",[["default",["bodyParser"],function(v){bodyParser=v}]]);_075‍.w("apollo-server-express",[["ApolloServer",["ApolloServer"],function(v){ApolloServer=v}],["gql",["gql"],function(v){gql=v}]]);_075‍.w("./api/movies.route",[["default",["movies"],function(v){movies=v}]]);_075‍.w("./api/users.route",[["default",["users"],function(v){users=v}]]);_075‍.w("./schema",[["typeDefs",["typeDefs"],function(v){typeDefs=v}],["resolvers",["resolvers"],function(v){resolvers=v}]]);_075‍.w("./api/movies.controller",[["default",["MoviesController"],function(v){MoviesController=v}]]);_075‍.w("./api/comments.controller",[["default",["CommentsController"],function(v){CommentsController=v}]]);_075‍.w("./api/users.controller",[["default",["UsersController"],function(v){UsersController=v}]]);_075‍.w("./dao/moviesDAO",[["default",["MoviesDAO"],function(v){MoviesDAO=v}]]);_075‍.w("./dao/commentsDAO",[["default",["CommentsDAO"],function(v){CommentsDAO=v}]]);_075‍.w("./dao/usersDAO",[["default",["UsersDAO"],function(v){UsersDAO=v}]]);

















       const server = new ApolloServer({
  typeDefs,
  resolvers,
  dataSources: () => ({ MoviesDAO, CommentsDAO, UsersDAO })
});

const app = express()

app.use(cors())
app.use(bodyParser.json())
app.use(bodyParser.urlencoded({ extended: true }))

// Register api routes
app.use("/api/v1/movies", movies)
app.use("/api/v1/user", users)

if (process.env.NODE_ENV === 'production') {
  app.use(express.static(path.join(__dirname, "../../client/out")))
  app.get("/*", (req, res) => {
    res.sendFile(path.join(__dirname, "../../client/out", "index.html"))
  })
}

server.applyMiddleware({ app });

_075‍.d(app);
